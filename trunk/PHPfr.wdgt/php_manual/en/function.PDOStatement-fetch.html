<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Fetches the next row from a result set</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.PDOStatement-execute.html">PDOStatement->execute()</a></div>
 <div class="next" style="float: right;"><a href="function.PDOStatement-fetchAll.html">PDOStatement->fetchAll()</a></div>
 <div class="up"><a href="ref.pdo.html">PDO</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.PDOStatement-fetch" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">PDOStatement-&gt;fetch()</h1>
  <p class="verinfo">(PHP 5 &gt;= 5.1.0, PECL pdo:0.1-1.0.3)</p><p class="refpurpose">PDOStatement->fetch() â€” 
   Fetches the next row from a result set
  </p>

 </div>
 <div class="refsect1 description">
  <h3 class="title">Description</h3>
  <div class="classsynopsis">
   <div class="ooclass"><b class="classname">PDOStatement</b></div>
   <div class="methodsynopsis">
    <span class="type">mixed</span> <span class="methodname"><b><b>fetch</b></b></span>
     ([ <span class="methodparam"><span class="type">int</span> <tt class="parameter">$fetch_style</tt></span>
    [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$cursor_orientation</tt></span>
    [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$cursor_offset</tt></span>
   ]]] )</div>

  </div>

  <p class="para">
   Fetches a row from a result set associated with a PDOStatement object. The
   <i><tt class="parameter">fetch_style</tt></i>
 parameter determines how PDO returns
   the row.
  </p>
 </div>


 <div class="refsect1 parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">fetch_style</tt></i>
</span>
     <dd>

      <p class="para">
       Controls how the next row will be returned to the caller. This value
       must be one of the <i class="literal">PDO::FETCH_*</i> constants,
       defaulting to <i class="literal">PDO::FETCH_BOTH</i>.
       <ul class="itemizedlist">
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_ASSOC</i>: returns an array indexed by column
         name as returned in your result set
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_BOTH</i> (default): returns an array indexed by
         both column name and 0-indexed column number as returned in your
         result set
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_BOUND</i>: returns <b><tt>TRUE</tt></b> and assigns the
         values of the columns in your result set to the PHP variables to which
         they were bound with the <a href="function.PDOStatement-bindColumn.html" class="xref">PDOStatement->bindColumn()</a>
         method
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_CLASS</i>: returns a new instance of the
         requested class, mapping the columns of the result set to named
         properties in the class. If <i><tt class="parameter">fetch_style</tt></i>

         includes PDO::FETCH_CLASSTYPE (e.g. <i class="literal">PDO::FETCH_CLASS |
         PDO::FETCH_CLASSTYPE</i>) then the name of the class is
         determined from a value of the first column.
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_INTO</i>: updates an existing instance
         of the requested class, mapping the columns of the result set to
         named properties in the class
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_LAZY</i>: combines
         <i class="literal">PDO::FETCH_BOTH</i> and <i class="literal">PDO::FETCH_OBJ</i>,
         creating the object variable names as they are accessed
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_NUM</i>: returns an array indexed by column
         number as returned in your result set, starting at column 0
        </p></li>
        <li class="listitem"><p class="para">
         <i class="literal">PDO::FETCH_OBJ</i>: returns an anonymous object with
         property names that correspond to the column names returned in your
         result set
        </p></li>
       </ul>
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">cursor_orientation</tt></i>
</span>
     <dd>

      <p class="para">
       For a PDOStatement object representing a scrollable cursor, this
       value determines which row will be returned to the caller. This value
       must be one of the <i class="literal">PDO::FETCH_ORI_*</i> constants,
       defaulting to <i class="literal">PDO::FETCH_ORI_NEXT</i>. To request a
       scrollable cursor for your PDOStatement object, you must set the
       <i class="literal">PDO::ATTR_CURSOR</i> attribute to
       <i class="literal">PDO::CURSOR_SCROLL</i> when you prepare the SQL
       statement with <a href="function.PDO-prepare.html" class="xref">PDO->prepare()</a>.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">offset</tt></i>
</span>
     <dd>

      <p class="para"> 
       For a PDOStatement object representing a scrollable cursor for which
       the <i class="literal">cursor_orientation</i> parameter is set to
       <i class="literal">PDO::FETCH_ORI_ABS</i>, this value specifies the
       absolute number of the row in the result set that shall be fetched.
      </p>
      <p class="para">
       For a PDOStatement object representing a scrollable cursor for which
       the <i class="literal">cursor_orientation</i> parameter is set to
       <i class="literal">PDO::FETCH_ORI_REL</i>, this value specifies the
       row to fetch relative to the cursor position before
       <a href="function.PDOStatement-fetch.html" class="xref">PDOStatement->fetch()</a> was called.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   The return value of this function on success depends on the fetch type. In
   all cases, <b><tt>FALSE</tt></b> is returned on failure.
  </p>
 </div>


 <div class="refsect1 examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example"><p><b>Example#1 Fetching rows using different fetch styles</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$sth&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;name,&nbsp;colour&nbsp;FROM&nbsp;fruit"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">/*&nbsp;Exercise&nbsp;PDOStatement::fetch&nbsp;styles&nbsp;*/<br /></span><span style="color: #007700">print(</span><span style="color: #DD0000">"PDO::FETCH_ASSOC:&nbsp;"</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"Return&nbsp;next&nbsp;row&nbsp;as&nbsp;an&nbsp;array&nbsp;indexed&nbsp;by&nbsp;column&nbsp;name\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_ASSOC</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br /><br />print(</span><span style="color: #DD0000">"PDO::FETCH_BOTH:&nbsp;"</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"Return&nbsp;next&nbsp;row&nbsp;as&nbsp;an&nbsp;array&nbsp;indexed&nbsp;by&nbsp;both&nbsp;column&nbsp;name&nbsp;and&nbsp;number\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_BOTH</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br /><br />print(</span><span style="color: #DD0000">"PDO::FETCH_LAZY:&nbsp;"</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"Return&nbsp;next&nbsp;row&nbsp;as&nbsp;an&nbsp;anonymous&nbsp;object&nbsp;with&nbsp;column&nbsp;names&nbsp;as&nbsp;properties\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_LAZY</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br /><br />print(</span><span style="color: #DD0000">"PDO::FETCH_OBJ:&nbsp;"</span><span style="color: #007700">);<br />print(</span><span style="color: #DD0000">"Return&nbsp;next&nbsp;row&nbsp;as&nbsp;an&nbsp;anonymous&nbsp;object&nbsp;with&nbsp;column&nbsp;names&nbsp;as&nbsp;properties\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$sth</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_OBJ</span><span style="color: #007700">);<br />print&nbsp;</span><span style="color: #0000BB">$result</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">NAME</span><span style="color: #007700">;<br />print(</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents"><pre>
<div class="cdata"><pre>
PDO::FETCH_ASSOC: Return next row as an array indexed by column name
Array
(
    [NAME] =&gt; apple
    [COLOUR] =&gt; red
)

PDO::FETCH_BOTH: Return next row as an array indexed by both column name and number
Array
(
    [NAME] =&gt; banana
    [0] =&gt; banana
    [COLOUR] =&gt; yellow
    [1] =&gt; yellow
)

PDO::FETCH_LAZY: Return next row as an anonymous object with column names as properties
PDORow Object
(
    [NAME] =&gt; orange
    [COLOUR] =&gt; orange
)

PDO::FETCH_OBJ: Return next row as an anonymous object with column names as properties
kiwi
</pre></div>
    </pre></div>
   </div>
   <div class="example"><p><b>Example#2 Fetching rows with a scrollable cursor</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #007700">function&nbsp;</span><span style="color: #0000BB">readDataForwards</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;hand,&nbsp;won,&nbsp;bet&nbsp;FROM&nbsp;mynumbers&nbsp;ORDER&nbsp;BY&nbsp;BET'</span><span style="color: #007700">;<br />&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CURSOR&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">CURSOR_SCROLL</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_NUM</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_ORI_NEXT</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\t"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\t"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />&nbsp;&nbsp;}<br />}<br />function&nbsp;</span><span style="color: #0000BB">readDataBackwards</span><span style="color: #007700">(</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;</span><span style="color: #0000BB">$sql&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">'SELECT&nbsp;hand,&nbsp;won,&nbsp;bet&nbsp;FROM&nbsp;mynumbers&nbsp;ORDER&nbsp;BY&nbsp;bet'</span><span style="color: #007700">;<br />&nbsp;&nbsp;try&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$dbh</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">prepare</span><span style="color: #007700">(</span><span style="color: #0000BB">$sql</span><span style="color: #007700">,&nbsp;array(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">ATTR_CURSOR&nbsp;</span><span style="color: #007700">=&gt;&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">CURSOR_SCROLL</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">execute</span><span style="color: #007700">();<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_NUM</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_ORI_LAST</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$data&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">0</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\t"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">1</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\t"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #0000BB">2</span><span style="color: #007700">]&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$data</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;while&nbsp;(</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$stmt</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">fetch</span><span style="color: #007700">(</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_NUM</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">PDO</span><span style="color: #007700">::</span><span style="color: #0000BB">FETCH_ORI_PRIOR</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$stmt&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">null</span><span style="color: #007700">;<br />&nbsp;&nbsp;}<br />&nbsp;&nbsp;catch&nbsp;(</span><span style="color: #0000BB">PDOException&nbsp;$e</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;print&nbsp;</span><span style="color: #0000BB">$e</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getMessage</span><span style="color: #007700">();<br />&nbsp;&nbsp;}<br />}<br /><br />print&nbsp;</span><span style="color: #DD0000">"Reading&nbsp;forwards:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">readDataForwards</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br /><br />print&nbsp;</span><span style="color: #DD0000">"Reading&nbsp;backwards:\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">readDataBackwards</span><span style="color: #007700">(</span><span style="color: #0000BB">$conn</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

    <div class="example-contents"><p>The above example will output:</p></div>
    <div class="example-contents"><pre>
<div class="cdata"><pre>
Reading forwards:
21    10    5
16    0     5
19    20    10

Reading backwards:
19    20    10
16    0     5
21    10    5
</pre></div>
    </pre></div>
   </div>

  </p>
 </div>


 <div class="refsect1 seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="function.PDO-prepare.html" class="xref">PDO->prepare()</a></li>
    <li class="member"><a href="function.PDOStatement-execute.html" class="xref">PDOStatement->execute()</a></li>
    <li class="member"><a href="function.PDOStatement-fetchAll.html" class="xref">PDOStatement->fetchAll()</a></li>
    <li class="member"><a href="function.PDOStatement-fetchColumn.html" class="xref">PDOStatement->fetchColumn()</a></li>
    <li class="member"><a href="function.PDOStatement-fetchObject.html" class="xref">PDOStatement->fetchObject()</a></li>
    <li class="member"><a href="function.PDOStatement-setFetchMode.html" class="xref">PDOStatement->setFetchMode()</a></li>
   </ul>
  </p>
 </div>

</div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.PDOStatement-execute.html">PDOStatement->execute()</a></div>
 <div class="next" style="float: right;"><a href="function.PDOStatement-fetchAll.html">PDOStatement->fetchAll()</a></div>
 <div class="up"><a href="ref.pdo.html">PDO</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
