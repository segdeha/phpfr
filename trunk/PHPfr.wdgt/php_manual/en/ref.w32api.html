<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>W32api Functions</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.vpopmail-set-user-quota.html">vpopmail_set_user_quota</a></div>
 <div class="next" style="float: right;"><a href="function.w32api-deftype.html">w32api_deftype</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
  <h1 class="title">W32api Functions</h1>
  

  <div class="partintro">
   <div id="w32api.intro" class="section">
    <h2 class="title">Introduction</h2>
    <p class="para">
     This extension is a generic extension API to DLLs. This was originally
     written to allow access to the Win32 API from PHP, although you can also
     access other functions exported via other DLLs.
    </p>
    <p class="para">
     Currently supported types are generic PHP types (strings, booleans, floats,
     integers and nulls) and types you define with <a href="function.w32api-deftype.html" class="function">w32api_deftype()</a>.
    </p>
    <blockquote><p><b class="note">Note</b>: 
     
      This extension has been moved to the 
<a href="http://pecl.php.net/" class="link external">&raquo; PECL</a> repository and is no longer bundled with 
PHP as of PHP 5.1.0.
     <br />
    </p></blockquote>
    <div class="warning"><b class="warning">Warning</b><p class="simpara">This extension is
<em class="emphasis">EXPERIMENTAL</em>. The behaviour of this extension --
including the names of its functions and anything else documented
about this extension -- may change without notice in a future release of PHP. 
Use this extension at your own risk.</p></div>
   </div>

   <div id="w32api.requirements" class="section">
    <h2 class="title">Requirements</h2>
    <p class="para">
     This extension will only work on Windows systems.
    </p>
   </div>
   
   <div id="w32api.installation" class="section">
    <h2 class="title">Installation</h2>
    <p class="para">There is no installation needed to use these
functions; they are part of the PHP core.</p>
   </div>
   
   <div id="w32api.configuration" class="section">
    <h2 class="title">Runtime Configuration</h2>
    <p class="para">This extension has no configuration directives defined in <var class="filename">php.ini</var>.</p>
   </div>

   <div id="w32api.resources" class="section">
    <h2 class="title">Resource Types</h2>
    <p class="para">
     This extension defines one resource type, used for user defined types.
     The name of this resource is <i class="literal">&quot;dynaparm&quot;</i>.
    </p>
   </div>

   

<div id="w32api.constants" class="section">
 <h2 class="title">Predefined Constants</h2>
 <p class="simpara">
The constants below are defined by this extension, and
will only be available when the extension has either
been compiled into PHP or dynamically loaded at runtime.
</p>
 <dl>

  <dt>

   <span class="term">
    <b><tt>DC_MICROSOFT</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_BORLAND</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_CALL_CDECL</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_CALL_STD</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_RETVAL_MATH4</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_RETVAL_MATH8</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_CALL_STD_BO</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_CALL_STD_MS</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_CALL_STD_M8</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DC_FLAG_ARGPTR</tt></b> 
    (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     
    </span>
   </dd>

  </dt>

 </dl>

</div>



   
   <div id="w32api.examples" class="section">
    <h2 class="title">Examples</h2>
    <p class="para">
     This example gets the amount of time the system has been running and
     displays it in a message box.
    </p>
    <div class="example">
     <p><b>Example#1 Get the uptime and display it in a message box</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;Define&nbsp;constants&nbsp;needed,&nbsp;taken&nbsp;from<br />//&nbsp;Visual&nbsp;Studio/Tools/Winapi/WIN32API.txt<br /></span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">"MB_OK"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Load&nbsp;the&nbsp;extension&nbsp;in<br /></span><span style="color: #0000BB">dl</span><span style="color: #007700">(</span><span style="color: #DD0000">"php_w32api.dll"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Register&nbsp;the&nbsp;GetTickCount&nbsp;function&nbsp;from&nbsp;kernel32.dll<br /></span><span style="color: #0000BB">w32api_register_function</span><span style="color: #007700">(</span><span style="color: #DD0000">"kernel32.dll"</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"GetTickCount"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"long"</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<br /></span><span style="color: #FF8000">//&nbsp;Register&nbsp;the&nbsp;MessageBoxA&nbsp;function&nbsp;from&nbsp;User32.dll<br /></span><span style="color: #0000BB">w32api_register_function</span><span style="color: #007700">(</span><span style="color: #DD0000">"User32.dll"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"MessageBoxA"</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"long"</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;Get&nbsp;uptime&nbsp;information<br /></span><span style="color: #0000BB">$ticks&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">GetTickCount</span><span style="color: #007700">();<br /><br /></span><span style="color: #FF8000">//&nbsp;Convert&nbsp;it&nbsp;to&nbsp;a&nbsp;nicely&nbsp;displayable&nbsp;text<br /></span><span style="color: #0000BB">$secs&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$ticks&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">1000</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$mins&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$secs&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">60</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$hours&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">floor</span><span style="color: #007700">(</span><span style="color: #0000BB">$mins&nbsp;</span><span style="color: #007700">/&nbsp;</span><span style="color: #0000BB">60</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$str&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sprintf</span><span style="color: #007700">(</span><span style="color: #DD0000">"You&nbsp;have&nbsp;been&nbsp;using&nbsp;your&nbsp;computer&nbsp;for:"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"\r\n&nbsp;%d&nbsp;Milliseconds,&nbsp;or&nbsp;\r\n&nbsp;%d&nbsp;Seconds"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"or&nbsp;\r\n&nbsp;%d&nbsp;mins&nbsp;or\r\n&nbsp;%d&nbsp;hours&nbsp;%d&nbsp;mins."</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$ticks</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$secs</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mins</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$hours</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$mins&nbsp;</span><span style="color: #007700">-&nbsp;(</span><span style="color: #0000BB">$hours</span><span style="color: #007700">*</span><span style="color: #0000BB">60</span><span style="color: #007700">));<br /><br /></span><span style="color: #FF8000">//&nbsp;Display&nbsp;a&nbsp;message&nbsp;box&nbsp;with&nbsp;only&nbsp;an&nbsp;OK&nbsp;button&nbsp;and&nbsp;the&nbsp;uptime&nbsp;text<br /></span><span style="color: #0000BB">MessageBoxA</span><span style="color: #007700">(</span><span style="color: #0000BB">NULL</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$str</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"Uptime&nbsp;Information"</span><span style="color: #007700">,&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">MB_OK</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>
   </div>
  </div>

































 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.w32api-deftype.html">w32api_deftype</a> — Defines a type for use with other w32api_functions</li><li><a href="function.w32api-init-dtype.html">w32api_init_dtype</a> — Creates an instance of the data type typename and fills it with the values passed</li><li><a href="function.w32api-invoke-function.html">w32api_invoke_function</a> — Invokes function funcname with the arguments passed after the function name</li><li><a href="function.w32api-register-function.html">w32api_register_function</a> — Registers function function_name from library with PHP</li><li><a href="function.w32api-set-call-method.html">w32api_set_call_method</a> — Sets the calling method used</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.vpopmail-set-user-quota.html">vpopmail_set_user_quota</a></div>
 <div class="next" style="float: right;"><a href="function.w32api-deftype.html">w32api_deftype</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
