<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>IBM DB2, Cloudscape and Apache Derby Functions</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="ref.pdo-ibm.connection.html">PDO_IBM DSN</a></div>
 <div class="next" style="float: right;"><a href="function.db2-autocommit.html">db2_autocommit</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
 <h1 class="title">IBM DB2, Cloudscape and Apache Derby Functions</h1>
 

 <div class="partintro">
  <div id="ibm-db2.intro" class="section">
   <h2 class="title">Introduction</h2>
   <p class="para">
    These functions enable you to access IBM DB2 Universal Database, IBM
    Cloudscape, and Apache Derby databases using the DB2 Call Level Interface
    (DB2 CLI).
   </p>
  </div>
  <div id="ibm-db2.requirements" class="section">
   <h2 class="title">Requirements</h2>
   <p class="para">
    To connect to IBM DB2 Universal Database for Linux, UNIX, and Windows, or
    IBM Cloudscape, or Apache Derby, you must install an IBM DB2 Universal
    Database client on the same computer on which you are running PHP. The
    extension has been developed and tested with DB2 Version 8.2.
   </p>
   <p class="para">
    To connect to IBM DB2 Universal Database for z/OS or iSeries, you also
    require IBM DB2 Connect or the equivalent DRDA gateway software.
   </p>
   <div id="ibm-db2.requirements.unix" class="section">
    <h2 class="title">Requirements on Linux or Unix</h2>
    <p class="para">
     The user invoking the PHP executable or SAPI must specify the DB2 instance
     before accessing these functions. You can set the name of the DB2 instance
     in <var class="filename">php.ini</var> using the <i class="literal">ibm_db2.instance_name</i>
     configuration option, or you can source the DB2 instance profile before
     invoking the PHP executable.
    </p>
    <p class="para">
     If you created a DB2 instance named <i class="literal">db2inst1</i> in
     <var class="filename">/home/db2inst1/</var>, for example, you can add the
     following line to <var class="filename">php.ini</var>:
     <div class="example-contents"><pre>
<div class="cdata"><pre>
ibm_db2.instance_name=db2inst1
</pre></div>
     </pre></div>
     If you do not set this option in <var class="filename">php.ini</var>, you must issue the
     following command to modify your environment variables to enable access to
     DB2:
     <div class="example-contents"><pre>
<div class="cdata"><pre>
bash$ source /home/db2inst1/sqllib/db2profile
</pre></div>
     </pre></div>
     To enable your PHP-enabled Web server to access these functions, you must
     either set the <i class="literal">ibm_db2.instance_name</i> configuration
     option in <var class="filename">php.ini</var>, or source the DB2 instance environment in your Web
     server start script (typically <var class="filename">/etc/init.d/httpd</var> or
     <var class="filename">/etc/init.d/apache</var>).
    </p>
   </div>
  </div>

  
  

<div id="ibm-db2.installation" class="section">
 <h2 class="title">Installation</h2>
 <p class="para">
  To build the ibm_db2 extension, the DB2 application development header
  files and libraries must be installed on your system. DB2 does not install
  these by default, so you may have to return to your DB2 installer and add
  this option. The header files are included with the DB2 Application
  Development Client freely available for download from the IBM DB2 Universal
  Database <a href="http://www-306.ibm.com/software/data/db2/udb/support/downloadv8.html" class="link external">&raquo; support site</a>.
 </p>
 <p class="para">
  If you add the DB2 application development header files and libraries to
  a Linux or Unix operating system on which DB2 was already installed, you
  must issue the command <strong class="command">db2iupdt -e</strong> to update the symbolic
  links to the header files and libraries in your DB2 instances.
 </p>
 <p class="para">
  ibm_db2 is a  <a href="http://pecl.php.net/" class="link external">&raquo; PECL</a> extension, so follow the
  instructions in <a href="install.pecl.html" class="xref">Installation of PECL extensions</a> to install the ibm_db2
  extension for PHP. Issue the <strong class="command">configure</strong> command to point
  to the location of your DB2 header files and libraries as follows:
  <div class="example-contents"><pre>
<div class="cdata"><pre>
bash$ ./configure --with-IBM_DB2=/path/to/DB2
</pre></div>
  </pre></div>
  The <strong class="command">configure</strong> command defaults to
  <var class="filename">/opt/IBM/db2/V8.1</var>.
 </p>
 <p class="para">
  <blockquote><p><b class="note">Note</b>: 
   <b>Note for IIS users</b>
   
    If you are using the ibm_db2 driver with Microsoft Internet Information Server (IIS) 
    you may have to do the following:
   <br />
   
    <ul class="simplelist">
     <li class="member">
      Install DB2 with extended operating system security.
     </li>
     <li class="member">
      Add the PHP binary path to the PATH system environment variable (default C:\php\).
     </li>
     <li class="member">
      Create another system environment variable equal to the path where the PHP.INI file is located (eg: PHPRC = C:\php\).
     </li>
     <li class="member">
      Add the IUSR_COMPUTERNAME to the DB2USERS group.
     </li>
    </ul>
   <br />
  </p></blockquote>
 </p>
</div>



  
  

<div id="ibm-db2.configuration" class="section">
 <h2 class="title">Runtime Configuration</h2>
 <p class="simpara">
The behaviour of these functions is affected by settings in <var class="filename">php.ini</var>.
</p>
 <p class="para">
  <table border="5">
   <caption><b>ibm_db2 Configure Options</b></caption>
   <colgroup>

    <thead valign="middle">
     <tr valign="middle">
      <th colspan="1">Name</th>
      <th colspan="1">Default</th>
      <th colspan="1">Changeable</th>
      <th colspan="1">Changelog</th>
     </tr>

    </thead>

    <tbody valign="middle">
     <tr valign="middle">
      <td colspan="1" rowspan="1" align="left">ibm_db2.binmode</td>
      <td colspan="1" rowspan="1" align="left">&quot;1&quot;</td>
      <td colspan="1" rowspan="1" align="left">PHP_INI_ALL</td>
      <td class="empty">&nbsp;</td>
     </tr>

     <tr valign="middle">
      <td colspan="1" rowspan="1" align="left">ibm_db2.i5_allow_commit</td>
      <td colspan="1" rowspan="1" align="left">&quot;0&quot;</td>
      <td colspan="1" rowspan="1" align="left">PHP_INI_SYSTEM</td>
      <td colspan="1" rowspan="1" align="left">Available since ibm_db2 1.4.9.</td>
     </tr>

     <tr valign="middle">
      <td colspan="1" rowspan="1" align="left">ibm_db2.i5_dbcs_alloc</td>
      <td colspan="1" rowspan="1" align="left">&quot;0&quot;</td>
      <td colspan="1" rowspan="1" align="left">PHP_INI_SYSTEM</td>
      <td colspan="1" rowspan="1" align="left">Available since ibm_db2 1.5.0.</td>
     </tr>

     <tr valign="middle">
      <td colspan="1" rowspan="1" align="left">ibm_db2.instance_name</td>
      <td colspan="1" rowspan="1" align="left">NULL</td>
      <td colspan="1" rowspan="1" align="left">PHP_INI_SYSTEM</td>
      <td colspan="1" rowspan="1" align="left">Available since ibm_db2 1.0.2.</td>
     </tr>

    </tbody>
   </colgroup>

  </table>


 </p>
 
 <p class="para">Here&#039;s a short explanation of
the configuration directives.</p>
 
 <p class="para">
  <dl>

   <dt id="ini.ibm-db2.binmode">
    <span class="term">
     <i><tt class="parameter">ibm_db2.binmode</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>
    <dd>

     <p class="para">
      This option controls the mode used for converting to and from binary
      data in the PHP application.
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para">
         1 (DB2_BINARY)
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         2 (DB2_CONVERT)
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         3 (DB2_PASSTHRU)
        </p>
       </li>
      </ul>
     </p>
    </dd>

   </dt>

   <dt id="ini.ibm-db2.i5-allow-commit">
    <span class="term">
     <i><tt class="parameter">ibm_db2.i5_allow_commit</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>
    <dd>

     <p class="para">
      This option controls the commit mode used for i5 schema collections 
      in the PHP application.
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para">
         0 no commit (see i5_commit for override)
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         1 allow commit (see i5_commit for override)
        </p>
       </li>
      </ul>
     </p>
    </dd>

   </dt>

   <dt id="ini.ibm-db2.i5-dbcs-alloc">
    <span class="term">
     <i><tt class="parameter">ibm_db2.i5_dbcs_alloc</tt></i>

     <a href="language.types.integer.html" class="type integer">integer</a>
    </span>
    <dd>

     <p class="para">
      This option controls the internal ibm_db2 allocation scheme 
      for large DBCS column buffers.
      <ul class="itemizedlist">
       <li class="listitem">
        <p class="para">
         0 no expanded allocations (see i5_dbcs_alloc for override)
        </p>
       </li>
       <li class="listitem">
        <p class="para">
         1 use expanded allocations (see i5_dbcs_alloc for override)
        </p>
       </li>
      </ul>
     </p>
    </dd>

   </dt>

   <dt id="ini.ibm-db2.instance-name">
    <span class="term">
     <i><tt class="parameter">ibm_db2.instance_name</tt></i>

     <a href="language.types.string.html" class="type string">string</a>
    </span>
    <dd>

     <p class="para">
      On Linux and UNIX operating systems, this option defines the name of the
      instance to use for cataloged database connections. If this option is set,
      its value overrides the DB2INSTANCE environment variable setting.
     </p>
     <p class="para">
      This option is ignored on Windows operating systems.
     </p>
    </dd>

   </dt>

  </dl>

 </p>
</div>



  


<div id="ibm-db2.constants" class="section">
 <h2 class="title">Predefined Constants</h2>
 <p class="simpara">
The constants below are defined by this extension, and
will only be available when the extension has either
been compiled into PHP or dynamically loaded at runtime.
</p>
 <dl>

  <dt>

   <span class="term">
    <b><tt>DB2_BINARY</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara"> 
     Specifies that binary data shall be returned as is. This is the default
     mode.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_CONVERT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that binary data shall be converted to a hexadecimal encoding
     and returned as an ASCII string.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_PASSTHRU</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that binary data shall be converted to a <b><tt>NULL</tt></b> value.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_SCROLLABLE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara"> 
     Specifies a scrollable cursor for a statement resource. This mode enables
     random access to rows in a result set, but currently is supported only by
     IBM DB2 Universal Database.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_FORWARD_ONLY</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies a forward-only cursor for a statement resource. This is the
     default cursor type and is supported on all database servers.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_PARAM_IN</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies the PHP variable should be bound as an IN parameter for a
     stored procedure.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_PARAM_OUT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies the PHP variable should be bound as an OUT parameter for a
     stored procedure.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_PARAM_INOUT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies the PHP variable should be bound as an INOUT parameter for a
     stored procedure.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_PARAM_FILE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that the column should be bound directly to a file for input.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_AUTOCOMMIT_ON</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that autocommit should be turned on.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_AUTOCOMMIT_OFF</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that autocommit should be turned off.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_DOUBLE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that the variable should be bound as a DOUBLE, FLOAT, or REAL
     data type.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_LONG</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that the variable should be bound as a SMALLINT, INTEGER, or
     BIGINT data type.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_CHAR</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that the variable should be bound as a CHAR or VARCHAR data type.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_CASE_NATURAL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that column names will be returned in their natural case.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_CASE_LOWER</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that column names will be returned in lower case.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_CASE_UPPER</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that column names will be returned in upper case.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_DEFERRED_PREPARE_ON</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that deferred prepare should be turned on for the specified statement resource. 
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>DB2_DEFERRED_PREPARE_OFF</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Specifies that deferred prepare should be turned off for the specified statement resource. 
    </span>
   </dd>

  </dt>

 </dl>

</div>




  <div id="ibm-db2.resources" class="section">
   <h2 class="title">Resource Types</h2>
   <p class="para">
    The ibm_db2 extension returns connection resources, statement resources,
    and result set resources.
   </p>
  </div>
 </div>
 




















































































































































































































































































































































<h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.db2-autocommit.html">db2_autocommit</a> — Returns or sets the AUTOCOMMIT state for a database connection</li><li><a href="function.db2-bind-param.html">db2_bind_param</a> — Binds a PHP variable to an SQL statement parameter</li><li><a href="function.db2-client-info.html">db2_client_info</a> — Returns an object with properties that describe the DB2 database client</li><li><a href="function.db2-close.html">db2_close</a> — Closes a database connection</li><li><a href="function.db2-column-privileges.html">db2_column_privileges</a> — Returns a result set listing the columns and associated privileges for a table</li><li><a href="function.db2-columns.html">db2_columns</a> — Returns a result set listing the columns and associated metadata for a table</li><li><a href="function.db2-commit.html">db2_commit</a> — Commits a transaction</li><li><a href="function.db2-conn-error.html">db2_conn_error</a> — Returns a string containing the SQLSTATE returned by the last connection attempt</li><li><a href="function.db2-conn-errormsg.html">db2_conn_errormsg</a> — Returns the last connection error message and SQLCODE value</li><li><a href="function.db2-connect.html">db2_connect</a> — Returns a connection to a database</li><li><a href="function.db2-cursor-type.html">db2_cursor_type</a> — Returns the cursor type used by a statement resource</li><li><a href="function.db2-escape-string.html">db2_escape_string</a> — Used to escape certain characters.</li><li><a href="function.db2-exec.html">db2_exec</a> — Executes an SQL statement directly</li><li><a href="function.db2-execute.html">db2_execute</a> — Executes a prepared SQL statement</li><li><a href="function.db2-fetch-array.html">db2_fetch_array</a> — Returns an array, indexed by column position, representing a row in a result set</li><li><a href="function.db2-fetch-assoc.html">db2_fetch_assoc</a> — Returns an array, indexed by column name, representing a row in a result set</li><li><a href="function.db2-fetch-both.html">db2_fetch_both</a> — Returns an array, indexed by both column name and position, representing a row in a result set</li><li><a href="function.db2-fetch-object.html">db2_fetch_object</a> — Returns an object with properties representing columns in the fetched row</li><li><a href="function.db2-fetch-row.html">db2_fetch_row</a> — Sets the result set pointer to the next row or requested row</li><li><a href="function.db2-field-display-size.html">db2_field_display_size</a> — Returns the maximum number of bytes required to display a column</li><li><a href="function.db2-field-name.html">db2_field_name</a> — Returns the name of the column in the result set</li><li><a href="function.db2-field-num.html">db2_field_num</a> — Returns the position of the named column in a result set</li><li><a href="function.db2-field-precision.html">db2_field_precision</a> — Returns the precision of the indicated column in a result set</li><li><a href="function.db2-field-scale.html">db2_field_scale</a> — Returns the scale of the indicated column in a result set</li><li><a href="function.db2-field-type.html">db2_field_type</a> — Returns the data type of the indicated column in a result set</li><li><a href="function.db2-field-width.html">db2_field_width</a> — Returns the width of the current value of the indicated column in a result set</li><li><a href="function.db2-foreign-keys.html">db2_foreign_keys</a> — Returns a result set listing the foreign keys for a table</li><li><a href="function.db2-free-result.html">db2_free_result</a> — Frees resources associated with a result set</li><li><a href="function.db2-free-stmt.html">db2_free_stmt</a> — Frees resources associated with the indicated statement resource</li><li><a href="function.db2-get-option.html">db2_get_option</a> — Retrieves an option value for a statement resource or a connection resource</li><li><a href="function.db2-lob-read.html">db2_lob_read</a> — Gets a user defined size of LOB files with each invocation</li><li><a href="function.db2-next-result.html">db2_next_result</a> — Requests the next result set from a stored procedure</li><li><a href="function.db2-num-fields.html">db2_num_fields</a> — Returns the number of fields contained in a result set</li><li><a href="function.db2-num-rows.html">db2_num_rows</a> — Returns the number of rows affected by an SQL statement</li><li><a href="function.db2-pconnect.html">db2_pconnect</a> — Returns a persistent connection to a database</li><li><a href="function.db2-prepare.html">db2_prepare</a> — Prepares an SQL statement to be executed</li><li><a href="function.db2-primary-keys.html">db2_primary_keys</a> — Returns a result set listing primary keys for a table</li><li><a href="function.db2-procedure-columns.html">db2_procedure_columns</a> — Returns a result set listing stored procedure parameters</li><li><a href="function.db2-procedures.html">db2_procedures</a> — Returns a result set listing the stored procedures registered in a database</li><li><a href="function.db2-result.html">db2_result</a> — Returns a single column from a row in the result set</li><li><a href="function.db2-rollback.html">db2_rollback</a> — Rolls back a transaction</li><li><a href="function.db2-server-info.html">db2_server_info</a> — Returns an object with properties that describe the DB2 database server</li><li><a href="function.db2-set-option.html">db2_set_option</a> — Set options for connection or statement resources</li><li><a href="function.db2-special-columns.html">db2_special_columns</a> — Returns a result set listing the unique row identifier columns for a table</li><li><a href="function.db2-statistics.html">db2_statistics</a> — Returns a result set listing the index and statistics for a table</li><li><a href="function.db2-stmt-error.html">db2_stmt_error</a> — Returns a string containing the SQLSTATE returned by an SQL statement</li><li><a href="function.db2-stmt-errormsg.html">db2_stmt_errormsg</a> — Returns a string containing the last SQL statement error message</li><li><a href="function.db2-table-privileges.html">db2_table_privileges</a> — Returns a result set listing the tables and associated privileges in a database</li><li><a href="function.db2-tables.html">db2_tables</a> — Returns a result set listing the tables and associated metadata in a database</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="ref.pdo-ibm.connection.html">PDO_IBM DSN</a></div>
 <div class="next" style="float: right;"><a href="function.db2-autocommit.html">db2_autocommit</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
