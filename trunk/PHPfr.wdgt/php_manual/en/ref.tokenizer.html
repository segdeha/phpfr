<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Tokenizer Functions</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.tidynode-getparent.html">tidyNode::getParent</a></div>
 <div class="next" style="float: right;"><a href="function.token-get-all.html">token_get_all</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
  <h1 class="title">Tokenizer Functions</h1>
  

  <div class="partintro">
   <div id="tokenizer.intro" class="section">
    <h2 class="title">Introduction</h2>
    <p class="para">
     The tokenizer functions provide an interface to the
     PHP tokenizer embedded in the Zend Engine. Using these
     functions you may write your own PHP source analyzing
     or modification tools without having to deal with the
     language specification at the lexical level.
    </p>
    <p class="para">
     See also the <a href="tokens.html" class="link">appendix about tokens</a>.
    </p>
   </div>

   <div id="tokenizer.requirements" class="section">
    <h2 class="title">Requirements</h2> 
    <p class="para">No external libraries are needed to build this extension.</p> 
   </div> 

   

<div id="tokenizer.installation" class="section">
 <h2 class="title">Installation</h2>
 <p class="para">
  Beginning with PHP 4.3.0 these functions are enabled by default.
  For older versions you have to configure and compile PHP with
  <span class="option">--enable-tokenizer</span>. You can disable
  tokenizer support with <span class="option">--disable-tokenizer</span>.
 </p>
 <p class="simpara"> The windows version of PHP has built in
support for this extension. You do not need to load any additional
extension in order to use these functions.</p>
 <blockquote><p><b class="note">Note</b>: 
  <span class="simpara">
   Built-in support for tokenizer is available as of PHP 4.3.0.
  </span>
 </p></blockquote>
</div>





   

<div id="tokenizer.constants" class="section">
 <h2 class="title">Predefined Constants</h2>
 <p class="para">
  When the extension has either been compiled into PHP or dynamically loaded
  at runtime, the tokens listed in <a href="tokens.html" class="xref">List of Parser Tokens</a> are defined as
  constants.
 </p>
</div>





   <div id="tokenizer.examples" class="section">
    <h2 class="title">Examples</h2>
    <p class="para">
     Here is a simple example PHP scripts using the tokenizer that 
     will read in a PHP file, strip all comments from the source
     and print the pure code only.
    </p>
    <div class="example">
     <p><b>Example#1 Strip comments with the tokenizer</b></p>
     <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">/*<br />&nbsp;*&nbsp;T_ML_COMMENT&nbsp;does&nbsp;not&nbsp;exist&nbsp;in&nbsp;PHP&nbsp;5.<br />&nbsp;*&nbsp;The&nbsp;following&nbsp;three&nbsp;lines&nbsp;define&nbsp;it&nbsp;in&nbsp;order&nbsp;to<br />&nbsp;*&nbsp;preserve&nbsp;backwards&nbsp;compatibility.<br />&nbsp;*<br />&nbsp;*&nbsp;The&nbsp;next&nbsp;two&nbsp;lines&nbsp;define&nbsp;the&nbsp;PHP&nbsp;5&nbsp;only&nbsp;T_DOC_COMMENT,<br />&nbsp;*&nbsp;which&nbsp;we&nbsp;will&nbsp;mask&nbsp;as&nbsp;T_ML_COMMENT&nbsp;for&nbsp;PHP&nbsp;4.<br />&nbsp;*/<br /></span><span style="color: #007700">if&nbsp;(!</span><span style="color: #0000BB">defined</span><span style="color: #007700">(</span><span style="color: #DD0000">'T_ML_COMMENT'</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'T_ML_COMMENT'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">T_COMMENT</span><span style="color: #007700">);<br />}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">define</span><span style="color: #007700">(</span><span style="color: #DD0000">'T_DOC_COMMENT'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">T_ML_COMMENT</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$source&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">file_get_contents</span><span style="color: #007700">(</span><span style="color: #DD0000">'example.php'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$tokens&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">token_get_all</span><span style="color: #007700">(</span><span style="color: #0000BB">$source</span><span style="color: #007700">);<br /><br />foreach&nbsp;(</span><span style="color: #0000BB">$tokens&nbsp;</span><span style="color: #007700">as&nbsp;</span><span style="color: #0000BB">$token</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">is_string</span><span style="color: #007700">(</span><span style="color: #0000BB">$token</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;simple&nbsp;1-character&nbsp;token<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$token</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;token&nbsp;array<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">list(</span><span style="color: #0000BB">$id</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$text</span><span style="color: #007700">)&nbsp;=&nbsp;</span><span style="color: #0000BB">$token</span><span style="color: #007700">;<br />&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(</span><span style="color: #0000BB">$id</span><span style="color: #007700">)&nbsp;{&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">T_COMMENT</span><span style="color: #007700">:&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;</span><span style="color: #0000BB">T_ML_COMMENT</span><span style="color: #007700">:&nbsp;</span><span style="color: #FF8000">//&nbsp;we've&nbsp;defined&nbsp;this<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">case&nbsp;</span><span style="color: #0000BB">T_DOC_COMMENT</span><span style="color: #007700">:&nbsp;</span><span style="color: #FF8000">//&nbsp;and&nbsp;this<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;no&nbsp;action&nbsp;on&nbsp;comments<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">break;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">//&nbsp;anything&nbsp;else&nbsp;-&gt;&nbsp;output&nbsp;"as&nbsp;is"<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #007700">echo&nbsp;</span><span style="color: #0000BB">$text</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
     </div>

    </div>    
   </div>


  </div>















 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.token-get-all.html">token_get_all</a> — Split given source into PHP tokens</li><li><a href="function.token-name.html">token_name</a> — Get the symbolic name of a given PHP token</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.tidynode-getparent.html">tidyNode::getParent</a></div>
 <div class="next" style="float: right;"><a href="function.token-get-all.html">token_get_all</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
