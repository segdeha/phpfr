<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Zip File Functions</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.yp-order.html">yp_order</a></div>
 <div class="next" style="float: right;"><a href="function.zip-close.html">zip_close</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
 <h1 class="title">Zip File Functions</h1>
 

 <div class="partintro">
  <div id="zip.intro" class="section">
   <h2 class="title">Introduction</h2>
   <p class="para">
    This extension enables you to transparently read or write ZIP compressed
    archives and the files inside them.
   </p>
  </div>

  <div id="zip.requirements" class="section">
   <h2 class="title">Requirements</h2>
   <div id="zip.requirements.old" class="section">
    <h2 class="title">PHP 4</h2>
    <p class="para">
     The bundled PHP 4 version requires <a href="http://zziplib.sourceforge.net/" class="link external">&raquo; ZZIPlib</a>,
     by Guido Draheim, version 0.10.6 or later 
    </p>
   </div>

   <div id="zip.requirements.new" class="section">
    <h2 class="title">PHP 5.2.0 or later</h2>
    <p class="para">
     This extension uses the functions of <a href="http://www.zlib.net/" class="link external">&raquo; zlib</a>
     by Jean-loup Gailly and Mark Adler.
    </p>
   </div>
  </div>

  

<div id="zip.installation" class="section">
 <h2 class="title">Installation</h2>
 
 <div id="zip.old.installation" class="section">
  <h2 class="title">PHP 4</h2>
  
  <blockquote><p><b class="note">Note</b>: 
   
    Zip support before PHP 4.1.0 is experimental.
   <br />
  </p></blockquote>
  
  <div class="warning"><b class="warning">Warning</b>
   <p class="para">
    Because the PHP 4 zip extension is unmaintained we recommend that the PECL
    extension is used rather than the bundled one.
   </p>
  </div>
  
  <div id="zip.installation.old.linux" class="section">
   <h2 class="title">Linux systems</h2>
   <p class="para">
    In order to use these functions you must compile PHP with zip support
    by using the <span class="option">--with-zip[=DIR]</span>
    configure option, where [DIR] is the prefix of the <a href="http://zziplib.sourceforge.net/" class="link external">&raquo; ZZIPlib</a> library install.
   </p>
  </div>
  
  <div id="zip.installation.old.windows" class="section">
   <h2 class="title">Windows</h2>
   <p class="para">
    Windows users need to enable <var class="filename">php_zip.dll</var> inside
    of <var class="filename">php.ini</var> in order to use these functions.
   </p>
  </div>
 </div>

 <div id="zip.installation.new" class="section">
  <h2 class="title">PHP 5.2.0 and later</h2>
  
  <div id="zip.installation.new.linux" class="section">
   <h2 class="title">Linux systems</h2>
   <p class="para">
    In order to use these functions you must compile PHP with zip support
    by using the <span class="option">--enable-zip</span>
    configure option.
   </p>
  </div>
  
  <div id="zip.installation.new.windows" class="section">
   <h2 class="title">Windows</h2>
   <p class="para">
    Windows users need to enable <var class="filename">php_zip.dll</var> inside
    of <var class="filename">php.ini</var> in order to use these functions.
   </p>
  </div>
 </div>

 <div id="zip.pecl.installation" class="section">
  <h2 class="title">Installation via PECL</h2>
  <p class="para">
   Information for installing this PECL extension may be
found in the manual chapter titled <a href="install.pecl.html" class="link">Installation 
of PECL extensions</a>. Additional information such as new releases,
downloads, source files, maintainer information, and a CHANGELOG, can be
located here: 
   <a href="http://pecl.php.net/package/zip" class="link external">&raquo; http://pecl.php.net/package/zip</a>.
  </p>
  <p class="para">
   
The <acronym title="Dynamic Link Library">DLL</acronym> for this <acronym title="PHP Extension and Application Repository">PECL</acronym> extension
may be downloaded from either the 
<a href="http://www.php.net/downloads.php" class="link external">&raquo; PHP Downloads</a> page or from 
<a href="http://pecl4win.php.net/" class="link external">&raquo; http://pecl4win.php.net/</a>
  </p>
  <p class="para">
   In PHP 4 this <acronym title="Dynamic Link Library">DLL</acronym> resides in
the <var class="filename">extensions/</var> directory within the PHP Windows
binaries download.
  </p>
 </div>

</div>





  <div id="zip.configuration" class="section">
   <h2 class="title">Runtime Configuration</h2>
   <p class="para">This extension has no configuration directives defined in <var class="filename">php.ini</var>.</p>
  </div>

  <div id="zip.resources" class="section">
   <h2 class="title">Resource Types</h2>
   <p class="para">
    There are two resource types used in the Zip module. The first one
    is the Zip directory for the Zip archive, the second Zip Entry for
    the archive entries.
   </p>
  </div>

  

<div id="zip.constants" class="section">
 <h2 class="title">Predefined Constants</h2>
 <p class="simpara">
The constants below are defined by this extension, and
will only be available when the extension has either
been compiled into PHP or dynamically loaded at runtime.
</p>

  <p class="para">
   ZipArchive uses class constants. There is three types of constants,
   Flags (FL_) errors (ER_) or mode (no prefix).
  </p>

 <dl>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CREATE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Create the archive if it does not exist.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::OVERWRITE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Always start a new archive, this mode will overwrite the file if
     it already exists.
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::EXCL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Error if archive already exists.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CHECKCONS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Perform additional consistency checks on the archive, and error if they fail.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::FL_NOCASE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Ignore case on name lookup
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::FL_NODIR</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Ignore directory component
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::FL_COMPRESSED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Read compressed data
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::FL_UNCHANGED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Use original data, ignoring changes.
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_DEFAULT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     better of deflate or store.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_STORE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     stored (uncompressed).
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_SHRINK</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     shrunk
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_REDUCE_1</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     reduced with factor 1
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_REDUCE_2</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     reduced with factor 2
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_REDUCE_3</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     reduced with factor 3
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_REDUCE_4</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     reduced with factor 4
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_IMPLODE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     imploded
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_DEFLATE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     deflated
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_DEFLATE64</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     deflate64
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_PKWARE_IMPLODE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     PKWARE imploding
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::CM_BZIP2</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     BZIP2 algorithm
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_OK</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     No error.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_MULTIDISK</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Multi-disk zip archives not supported.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_RENAME</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Renaming temporary file failed.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_CLOSE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Closing zip archive failed
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_SEEK</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
      Seek error
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_READ</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Read error
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_WRITE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Write error
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_CRC</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     CRC error
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_ZIPCLOSED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Containing zip archive was closed
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_NOENT</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     No such file.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_EXISTS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     File already exists
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_OPEN</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Can&#039;t open file
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_TMPOPEN</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Failure to create temporary file.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_ZLIB</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Zlib error
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_MEMORY</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Memory allocation failure
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_CHANGED</tt></b>
     (<a href="language.types.string.html" class="type string">string</a>)
   </span>
   <dd>

    <span class="simpara">
     Entry has been changed
    </span>
   </dd>

  </dt>


  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_COMPNOTSUPP</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Compression method not supported.
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_EOF</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Premature EOF
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_INVAL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Invalid argument
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_NOZIP</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Not a zip archive
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_INTERNAL</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Internal error
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_INCONS</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Zip archive inconsistent
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_REMOVE</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Can&#039;t remove file
    </span>
   </dd>

  </dt>

  <dt>

   <span class="term">
    <b><tt>ZIPARCHIVE::ER_DELETED</tt></b>
     (<a href="language.types.integer.html" class="type integer">integer</a>)
   </span>
   <dd>

    <span class="simpara">
     Entry has been deleted
    </span>
   </dd>

  </dt>

 </dl>

</div>




  <div id="zip.examples" class="section">
   <h2 class="title">Examples</h2>
   <div class="example">
    <p><b>Example#1 Create a Zip archive</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$zip&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$filename&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #DD0000">"./test112.zip"</span><span style="color: #007700">;<br /><br />if&nbsp;(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #0000BB">$filename</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">ZIPARCHIVE</span><span style="color: #007700">::</span><span style="color: #0000BB">CREATE</span><span style="color: #007700">)!==</span><span style="color: #0000BB">TRUE</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;exit(</span><span style="color: #DD0000">"cannot&nbsp;open&nbsp;&lt;$filename&gt;\n"</span><span style="color: #007700">);<br />}<br /><br /></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFromString</span><span style="color: #007700">(</span><span style="color: #DD0000">"testfilephp.txt"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"#1&nbsp;This&nbsp;is&nbsp;a&nbsp;test&nbsp;string&nbsp;added&nbsp;as&nbsp;testfilephp.txt.\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFromString</span><span style="color: #007700">(</span><span style="color: #DD0000">"testfilephp2.txt"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">time</span><span style="color: #007700">(),&nbsp;</span><span style="color: #DD0000">"#2&nbsp;This&nbsp;is&nbsp;a&nbsp;test&nbsp;string&nbsp;added&nbsp;as&nbsp;testfilephp2.txt.\n"</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">addFile</span><span style="color: #007700">(</span><span style="color: #0000BB">$thisdir&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"/too.php"</span><span style="color: #007700">,</span><span style="color: #DD0000">"/testfromfile.php"</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"numfiles:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"status:"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">status&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">$zip</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">close</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example">
    <p><b>Example#2 Dump the archive details and listing</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$za&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">ZipArchive</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">'test_with_comment.zip'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$za</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">var_dump</span><span style="color: #007700">(</span><span style="color: #0000BB">$za</span><span style="color: #007700">);<br />echo&nbsp;</span><span style="color: #DD0000">"numFiles:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"status:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">status&nbsp;&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"statusSys:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">statusSys&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"filename:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">filename&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">"comment:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">comment&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />for&nbsp;(</span><span style="color: #0000BB">$i</span><span style="color: #007700">=</span><span style="color: #0000BB">0</span><span style="color: #007700">;&nbsp;</span><span style="color: #0000BB">$i</span><span style="color: #007700">&lt;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles</span><span style="color: #007700">;</span><span style="color: #0000BB">$i</span><span style="color: #007700">++)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"index:&nbsp;$i\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">statIndex</span><span style="color: #007700">(</span><span style="color: #0000BB">$i</span><span style="color: #007700">));<br />}<br />echo&nbsp;</span><span style="color: #DD0000">"numFile:"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$za</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">numFiles&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <div class="example">
    <p><b>Example#3 Zip stream wrapper, read an OpenOffice meta info</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$reader&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">XMLReader</span><span style="color: #007700">();<br /><br /></span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">open</span><span style="color: #007700">(</span><span style="color: #DD0000">'zip://'&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">dirname</span><span style="color: #007700">(</span><span style="color: #0000BB">__FILE__</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'/test.odt#meta.xml'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$odt_meta&nbsp;</span><span style="color: #007700">=&nbsp;array();<br />while&nbsp;(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">read</span><span style="color: #007700">())&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nodeType&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">XMLREADER</span><span style="color: #007700">::</span><span style="color: #0000BB">ELEMENT</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$elm&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">nodeType&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #0000BB">XMLREADER</span><span style="color: #007700">::</span><span style="color: #0000BB">END_ELEMENT&nbsp;</span><span style="color: #007700">&amp;&amp;&nbsp;</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">name&nbsp;</span><span style="color: #007700">==&nbsp;</span><span style="color: #DD0000">'office:meta'</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!</span><span style="color: #0000BB">trim</span><span style="color: #007700">(</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$odt_meta</span><span style="color: #007700">[</span><span style="color: #0000BB">$elm</span><span style="color: #007700">]&nbsp;=&nbsp;</span><span style="color: #0000BB">$reader</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">value</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;}<br />}<br /></span><span style="color: #0000BB">print_r</span><span style="color: #007700">(</span><span style="color: #0000BB">$odt_meta</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
   <p class="para">
    This example uses the old API (PHP 4), it opens a ZIP file
    archive, reads each file in the archive and prints out its
    contents. The <var class="filename">test2.zip</var> archive used in this
    example is one of the test archives in the ZZIPlib source
    distribution.
   </p>
   <div class="example">
    <p><b>Example#4 Zip Usage Example</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /><br />$zip&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">zip_open</span><span style="color: #007700">(</span><span style="color: #DD0000">"/tmp/test2.zip"</span><span style="color: #007700">);<br /><br />if&nbsp;(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(</span><span style="color: #0000BB">$zip_entry&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">zip_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">zip_entry_name</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Actual&nbsp;Filesize:&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">zip_entry_filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Compressed&nbsp;Size:&nbsp;&nbsp;&nbsp;&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">zip_entry_compressedsize</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"Compression&nbsp;Method:&nbsp;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">zip_entry_compressionmethod</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(</span><span style="color: #0000BB">zip_entry_open</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">"r"</span><span style="color: #007700">))&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"File&nbsp;Contents:\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$buf&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">zip_entry_read</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">zip_entry_filesize</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">));<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"$buf\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">zip_entry_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip_entry</span><span style="color: #007700">);<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"\n"</span><span style="color: #007700">;<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;}<br /><br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">zip_close</span><span style="color: #007700">(</span><span style="color: #0000BB">$zip</span><span style="color: #007700">);<br /><br />}<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </div>
 </div>

 










































































































































































































































 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.zip-close.html">zip_close</a> — Close a ZIP file archive</li><li><a href="function.zip-entry-close.html">zip_entry_close</a> — Close a directory entry</li><li><a href="function.zip-entry-compressedsize.html">zip_entry_compressedsize</a> — Retrieve the compressed size of a directory entry</li><li><a href="function.zip-entry-compressionmethod.html">zip_entry_compressionmethod</a> — Retrieve the compression method of a directory entry</li><li><a href="function.zip-entry-filesize.html">zip_entry_filesize</a> — Retrieve the actual file size of a directory entry</li><li><a href="function.zip-entry-name.html">zip_entry_name</a> — Retrieve the name of a directory entry</li><li><a href="function.zip-entry-open.html">zip_entry_open</a> — Open a directory entry for reading</li><li><a href="function.zip-entry-read.html">zip_entry_read</a> — Read from an open directory entry</li><li><a href="function.zip-open.html">zip_open</a> — Open a ZIP file archive</li><li><a href="function.zip-read.html">zip_read</a> — Read next entry in a ZIP file archive</li><li><a href="function.ziparchive-addemptydir.html">ZipArchive::addEmptyDir</a> — Add a new directory</li><li><a href="function.ziparchive-addfile.html">ZipArchive::addFile</a> — Adds a file to a ZIP archive from the given path</li><li><a href="function.ziparchive-addfromstring.html">ZipArchive::addFromString</a> — Add a file to a ZIP archive using its contents</li><li><a href="function.ziparchive-close.html">ZipArchive::close</a> — Close the active archive (opened or newly created)</li><li><a href="function.ziparchive-deleteindex.html">ZipArchive::deleteIndex</a> — delete an entry in the archive using its index</li><li><a href="function.ziparchive-deletename.html">ZipArchive::deleteName</a> — delete an entry in the archive using its name</li><li><a href="function.ziparchive-extractto.html">ZipArchive::extractTo</a> — Extract the archive contents</li><li><a href="function.ziparchive-getarchivecomment.html">ZipArchive::getArchiveComment</a> — Returns the Zip archive comment</li><li><a href="function.ziparchive-getcommentindex.html">ZipArchive::getCommentIndex</a> — Returns the comment of an entry using the entry index</li><li><a href="function.ziparchive-getcommentname.html">ZipArchive::getCommentName</a> — Returns the comment of an entry using the entry name</li><li><a href="function.ziparchive-getfromindex.html">ZipArchive::getFromIndex</a> — Returns the entry contents using its index.</li><li><a href="function.ziparchive-getfromname.html">ZipArchive::getFromName</a> — Returns the entry contents using its name.</li><li><a href="function.ziparchive-getnameindex.html">ZipArchive::getNameIndex</a> — Returns the name of an entry using its index</li><li><a href="function.ziparchive-getstream.html">ZipArchive::getStream</a> — Get a file handler to the entry defined by its name (read only).</li><li><a href="function.ziparchive-locatename.html">ZipArchive::locateName</a> — Returns the index of the entry in the archive</li><li><a href="function.ziparchive-open.html">ZipArchive::open</a> — Open a ZIP file archive</li><li><a href="function.ziparchive-renameindex.html">ZipArchive::renameIndex</a> — Renames an entry defined by its index</li><li><a href="function.ziparchive-renamename.html">ZipArchive::renameName</a> — Renames an entry defined by its name</li><li><a href="function.ziparchive-setarchivecomment.html">ZipArchive::setArchiveComment</a> — Set the comment of a ZIP archive</li><li><a href="function.ziparchive-setcommentindex.html">ZipArchive::setCommentIndex</a> — Set the comment of an entry defined by its index</li><li><a href="function.ziparchive-setCommentName.html">ZipArchive::setCommentName</a> — Set the comment of an entry defined by its name</li><li><a href="function.ziparchive-statindex.html">ZipArchive::statIndex</a> — Get the details of an entry defined by its index.</li><li><a href="function.ziparchive-statname.html">ZipArchive::statName</a> — Get the details of an entry defined by its name.</li><li><a href="function.ziparchive-unchangeall.html">ZipArchive::unchangeAll</a> — Undo all changes done in the archive.</li><li><a href="function.ziparchive-unchangearchive.html">ZipArchive::unchangeArchive</a> — Revert all global changes done in the archive.</li><li><a href="function.ziparchive-unchangeindex.html">ZipArchive::unchangeIndex</a> — Revert all changes done to an entry at the given index.</li><li><a href="function.ziparchive-unchangename.html">ZipArchive::unchangeName</a> — Revert all changes done to an entry with the given name.</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.yp-order.html">yp_order</a></div>
 <div class="next" style="float: right;"><a href="function.zip-close.html">zip_close</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
