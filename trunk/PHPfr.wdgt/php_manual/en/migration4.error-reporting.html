<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Error reporting</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="migration4.parser.html">Parser behavior</a></div>
 <div class="next" style="float: right;"><a href="migration4.initializers.html">Initializers</a></div>
 <div class="up"><a href="migration4.html">Migrating from PHP 3 to PHP 4</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="migration4.error-reporting" class="section">
   <h2 class="title">Error reporting</h2>

   <div id="migration4.error-reporting.config" class="section">
    <h2 class="title">Configuration changes</h2>
    <p class="para">
     With PHP 3 the error reporting level was set as a simple
     numeric value formed by summing up the numbers related to
     different error levels. Usual values were 15 for reporting all
     errors and warnings or 7 for reporting everything but simple
     notice messages reporting bad style and things like that.
    </p>
    <p class="para">
     PHP 4 has a larger set of error and warning levels and comes with a
     configuration parser that now allows for symbolic constants to be used
     for setting the intended behavior.
    </p>
    <p class="para">
     Error reporting level should now be configured by explicitly
     taking away the warning levels you do not want to generate error
     messages by x-oring them from the symbolic constant
     <i class="literal">E_ALL</i>. Sounds complicated? Well, lets say you
     want the error reporting system to report all but the simple
     style warnings that are categorized by the symbolic constant
     <i class="literal">E_NOTICE</i>.  Then you&#039;ll put the following into
     your <var class="filename">php.ini</var>: <i class="literal">error_reporting =
     E_ALL &amp; ~ ( E_NOTICE )</i>.  If you want to suppress
     warnings too you add up the appropriate constant within the
     braces using the binary or operator &#039;|&#039;:
     <i class="literal">error_reporting= E_ALL &amp; ~ ( E_NOTICE | E_WARNING
     )</i>.
    </p>
    <div class="warning"><b class="warning">Warning</b>
     <p class="para">
      When upgrading code or servers from PHP 3 to PHP 4 you should
      check these settings and calls to
      <a href="function.error-reporting.html" class="function">error_reporting()</a> or you might disable
      reporting the new error types, especially <i class="literal">E_COMPILE_ERROR</i>. This
      may lead to empty documents without any feedback of what happened
      or where to look for the problem.
     </p>
    </div>
    <div class="warning"><b class="warning">Warning</b>
     <p class="para">
      Using the old values 7 and 15 for setting up error reporting is
      a very bad idea as this suppresses some of the newly added error
      classes including parse errors. This may lead to very strange
      behavior as scripts might no longer work without error messages
      showing up anywhere.
     </p>
     <p class="para">
      This has lead to a lot of unreproducible bug reports in the
      past where people reported script engine problems they were not
      capable to track down while the true case was usually some
      missing &#039;}&#039; in a required file that the parser was not able to
      report due to a misconfigured error reporting system.
     </p>
     <p class="para">
      So checking your error reporting setup should be the first thing
      to do whenever your scripts silently die. The Zend engine can
      be considered mature enough nowadays to not cause this kind of
      strange behavior.
     </p>
    </div>
   </div>

   <div id="migration4.error-reporting.additions" class="section">
    <h2 class="title">Additional warning messages</h2>
    <p class="para">
     A lot of existing PHP 3 code uses language constructs that
     should be considered as very bad style as this code, while doing
     the intended thing now, could easily be broken by changes in
     other places. PHP 4 will output a lot of notice messages in
     such situations where PHP 3 didn&#039;t.  The easy fix is to just
     turn off <i class="literal">E_NOTICE</i> messages, but it is usually
     a good idea to fix the code instead.
    </p>
    <p class="para">
     The most common case that will now produce notice messages is the
     use of unquoted string constants as array indices. Both PHP 3
     and 4 will fall back to interpret these as strings if no
     keyword or constant is known by that name, but whenever a
     constant by that name had been defined anywhere else in the code
     it might break your script. This can even become a security risk
     if some intruder manages to redefine string constants in a way
     that makes your script give him access rights he wasn&#039;t intended
     to have. So PHP 4 will now warn you whenever you use unquoted
     string constants as for example in
     <i class="literal">$_SERVER[REQUEST_METHOD]</i>. Changing it
     to <i class="literal">$_SERVER[&#039;REQUEST_METHOD&#039;]</i> will
     make the parser happy and greatly improve the style and security
     of your code.
    </p>
    <p class="para">
     Another thing PHP 4 will now tell you about is the use of
     uninitialized variables or array elements.
    </p>
   </div>
   
  </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="migration4.parser.html">Parser behavior</a></div>
 <div class="next" style="float: right;"><a href="migration4.initializers.html">Initializers</a></div>
 <div class="up"><a href="migration4.html">Migrating from PHP 3 to PHP 4</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
