<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Fetch one row as an associative array</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.sesam-execimm.html">sesam_execimm</a></div>
 <div class="next" style="float: right;"><a href="function.sesam-fetch-result.html">sesam_fetch_result</a></div>
 <div class="up"><a href="ref.sesam.html">SESAM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="function.sesam-fetch-array" class="refentry">
 <div class="refnamediv">
  <h1 class="refname">sesam_fetch_array</h1>
  <p class="verinfo">(No version information available, might be only in CVS)</p><p class="refpurpose">sesam_fetch_array â€” Fetch one row as an associative array</p>

 </div>

 <div class="refsect1 description">
  <h3 class="title">Description</h3>
  <div class="methodsynopsis">
   <span class="type">array</span> <span class="methodname"><b><b>sesam_fetch_array</b></b></span>
    ( <span class="methodparam"><span class="type">string</span> <tt class="parameter">$result_id</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$whence</tt></span>
   [, <span class="methodparam"><span class="type">int</span> <tt class="parameter">$offset</tt></span>
  ]] )</div>

  <p class="para">
   <b>sesam_fetch_array()</b> is an alternative version
   of <a href="function.sesam-fetch-row.html" class="function">sesam_fetch_row()</a>.  Instead of storing the
   data in the numeric indices of the result array, it stores the
   data in associative indices, using the field names as keys.
  </p>
  <p class="para">
   <b>sesam_fetch_array()</b> fetches one row of data
   from the result associated with the specified result identifier.
   The row is returned as an associative array.  Each result column
   is stored with an associative index equal to its column
   (aka. field) name. The column names are converted to lower case.
  </p>
  <p class="para">
   Columns without a field name (e.g., results of arithmetic
   operations) and empty fields are not stored in the array.  Also,
   if two or more columns of the result have the same column names,
   the later column will take precedence.  In this situation, either
   call <a href="function.sesam-fetch-row.html" class="function">sesam_fetch_row()</a> or make an alias for
   the column.
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
SELECT TBL1.COL AS FOO, TBL2.COL AS BAR FROM TBL1, TBL2
</pre></div>
    </div>

   </div>
  </p>
  <p class="para">
   A special handling allows fetching &quot;multiple field&quot; columns
   (which would otherwise all have the same column names).  For each
   column of a &quot;multiple field&quot;, the index name is constructed by
   appending the string &quot;(n)&quot; where n is the sub-index of the
   multiple field column, ranging from 1 to its declared repetition
   factor. The indices are NOT zero based, in order to match the
   nomenclature used in the respective query syntax.  For a column
   declared as:
   <div class="informalexample">
    <div class="example-contents">
<div class="cdata"><pre>
CREATE TABLE ... ( ... MULTI(3) INT )
</pre></div>
    </div>

   </div>
   the associative indices used for the individual &quot;multiple field&quot;
   columns would be <i class="literal">&quot;multi(1)&quot;</i>,
   <i class="literal">&quot;multi(2)&quot;</i>, and <i class="literal">&quot;multi(3)&quot;</i>
   respectively.
  </p>
  <p class="para">
   Subsequent calls to <b>sesam_fetch_array()</b> would
   return the next (or prior, or n&#039;th next/prior, depending on the
   scroll attributes) row in the result set, or <b><tt>FALSE</tt></b> if there are no more rows.
  </p>
 </div>


 <div class="refsect1 parameters">
  <h3 class="title">Parameters</h3>
  <p class="para">
   <dl>

    <dt>

     <span class="term"><i><tt class="parameter">result_id</tt></i>
</span>
     <dd>

      <p class="para">
       A valid result id returned by <a href="function.sesam-query.html" class="function">sesam_query()</a>.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">whence</tt></i>
</span>
     <dd>

      <p class="para">
       <i><tt class="parameter">whence</tt></i>
 is an optional
       parameter for a fetch operation on &quot;scrollable&quot; cursors, which
       can be set to the following predefined constants:
       <table border="5">
        <caption><b>Valid values for <i><tt class="parameter">&quot;whence&quot;</tt></i>
 parameter</b></caption>
        <colgroup>

         <thead valign="middle">
          <tr valign="middle">
           <th colspan="1">Value</th>
           <th colspan="1">Constant</th>
           <th colspan="1">Meaning</th>
          </tr>

         </thead>

         <tbody valign="middle">
          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">0</td>
           <td colspan="1" rowspan="1" align="left"><b><tt>SESAM_SEEK_NEXT</tt></b></td>
           <td colspan="1" rowspan="1" align="left">
            read sequentially (after fetch, the internal default is set
            to <b><tt>SESAM_SEEK_NEXT</tt></b>)
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">1</td>
           <td colspan="1" rowspan="1" align="left"><b><tt>SESAM_SEEK_PRIOR</tt></b></td>
           <td colspan="1" rowspan="1" align="left">
            read sequentially backwards (after fetch, the internal
            default is set to <b><tt>SESAM_SEEK_PRIOR</tt></b>)
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">2</td>
           <td colspan="1" rowspan="1" align="left"><b><tt>SESAM_SEEK_FIRST</tt></b></td>
           <td colspan="1" rowspan="1" align="left">
            rewind to first row (after fetch, the default is set to
            <b><tt>SESAM_SEEK_NEXT</tt></b>)
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">3</td>
           <td colspan="1" rowspan="1" align="left"><b><tt>SESAM_SEEK_LAST</tt></b></td>
           <td colspan="1" rowspan="1" align="left">
            seek to last row (after fetch, the default is set to
            <b><tt>SESAM_SEEK_PRIOR</tt></b>)
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">4</td>
           <td colspan="1" rowspan="1" align="left"><b><tt>SESAM_SEEK_ABSOLUTE</tt></b></td>
           <td colspan="1" rowspan="1" align="left">
            seek to absolute row number given as
            <i><tt class="parameter">offset</tt></i>
 (Zero-based. After fetch, the
            internal default is set to
            <b><tt>SESAM_SEEK_ABSOLUTE</tt></b>, and the internal
            offset value is auto-incremented)
           </td>
          </tr>

          <tr valign="middle">
           <td colspan="1" rowspan="1" align="left">5</td>
           <td colspan="1" rowspan="1" align="left"><b><tt>SESAM_SEEK_RELATIVE</tt></b></td>
           <td colspan="1" rowspan="1" align="left">
            seek relative to current scroll position, where
            <i><tt class="parameter">offset</tt></i>
 can be a positive or negative
            offset value.
           </td>
          </tr>

         </tbody>
        </colgroup>

       </table>

       This parameter is only valid for &quot;scrollable&quot; cursors.
      </p>
      <p class="para">
       When using &quot;scrollable&quot; cursors, the cursor can be freely positioned
       on the result set. If the <i><tt class="parameter">whence</tt></i>
 parameter is
       omitted, the global default values for the scrolling type (initialized
       to: <b><tt>SESAM_SEEK_NEXT</tt></b>, and settable by
       <a href="function.sesam-seek-row.html" class="function">sesam_seek_row()</a>) are used. If
       <i><tt class="parameter">whence</tt></i>
 is supplied, its value replaces the
       global default.
      </p>
     </dd>

    </dt>

    <dt>

     <span class="term"><i><tt class="parameter">offset</tt></i>
</span>
     <dd>

      <p class="para">
       Only evaluated (and required) if <i><tt class="parameter">whence</tt></i>
 is
       either <b><tt>SESAM_SEEK_RELATIVE</tt></b> or
       <b><tt>SESAM_SEEK_ABSOLUTE</tt></b>. This parameter is only
       valid for &quot;scrollable&quot; cursors.
      </p>
     </dd>

    </dt>

   </dl>

  </p>
 </div>


 <div class="refsect1 returnvalues">
  <h3 class="title">Return Values</h3>
  <p class="para">
   Returns an array that corresponds to the fetched row, or
   <b><tt>FALSE</tt></b> if there are no more rows.
  </p>
 </div>


 <div class="refsect1 examples">
  <h3 class="title">Examples</h3>
  <p class="para">
   <div class="example">
    <p><b>Example#1 SESAM fetch array</b></p>
    <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br />$result&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sesam_query</span><span style="color: #007700">(</span><span style="color: #DD0000">"SELECT&nbsp;*&nbsp;FROM&nbsp;phone\n"&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;WHERE&nbsp;LASTNAME='"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">strtoupper</span><span style="color: #007700">(</span><span style="color: #0000BB">$name</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">"'\n"</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"&nbsp;&nbsp;ORDER&nbsp;BY&nbsp;FIRSTNAME"</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">1</span><span style="color: #007700">);<br />if&nbsp;(!</span><span style="color: #0000BB">$result</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #FF8000">/*&nbsp;...&nbsp;error&nbsp;...&nbsp;*/<br /></span><span style="color: #007700">}<br /></span><span style="color: #FF8000">//&nbsp;print&nbsp;the&nbsp;table:<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">"&lt;table&nbsp;border=\"1\"&gt;\n"</span><span style="color: #007700">;<br />while&nbsp;((</span><span style="color: #0000BB">$row&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">sesam_fetch_array</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">))&nbsp;&amp;&amp;&nbsp;</span><span style="color: #0000BB">count</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">)&nbsp;&gt;&nbsp;</span><span style="color: #0000BB">0</span><span style="color: #007700">)&nbsp;{<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;tr&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;td&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"firstname"</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;td&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"lastname"</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;td&gt;"&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">htmlspecialchars</span><span style="color: #007700">(</span><span style="color: #0000BB">$row</span><span style="color: #007700">[</span><span style="color: #DD0000">"phoneno"</span><span style="color: #007700">])&nbsp;.&nbsp;</span><span style="color: #DD0000">"&lt;/td&gt;\n"</span><span style="color: #007700">;<br />&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;</span><span style="color: #DD0000">"&lt;/tr&gt;\n"</span><span style="color: #007700">;<br />}<br />echo&nbsp;</span><span style="color: #DD0000">"&lt;/table&gt;\n"</span><span style="color: #007700">;<br /></span><span style="color: #0000BB">sesam_free_result</span><span style="color: #007700">(</span><span style="color: #0000BB">$result</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
    </div>

   </div>
  </p>
 </div>


 <div class="refsect1 seealso">
  <h3 class="title">See Also</h3>
  <p class="para">
   <ul class="simplelist">
    <li class="member"><a href="function.sesam-fetch-row.html" class="function">sesam_fetch_row()</a></li>
   </ul>
  </p>
 </div>


</div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.sesam-execimm.html">sesam_execimm</a></div>
 <div class="next" style="float: right;"><a href="function.sesam-fetch-result.html">sesam_fetch_result</a></div>
 <div class="up"><a href="ref.sesam.html">SESAM</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
