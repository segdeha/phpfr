<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>PHP / Java Integration</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.ircg-whois.html">ircg_whois</a></div>
 <div class="next" style="float: right;"><a href="function.java-last-exception-clear.html">java_last_exception_clear</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div>
  <h1 class="title">PHP / Java Integration</h1>
  
  <div class="partintro">
   
   <div id="java.intro" class="section">
    <h2 class="title">Introduction</h2>
    <p class="para">
     There are two possible ways to bridge PHP and Java: you can either 
     <a href="ref.java.html#java.servlet" class="link">integrate PHP into a Java Servlet
     environment</a>, which is the more stable and efficient solution,
     or integrate Java support into PHP. The former is provided by a SAPI
     module that interfaces with the Servlet server, the latter by this
     Java extension.
    </p>
    <p class="para">
     The Java extension provides a simple and effective means for creating and
     invoking methods on Java objects from PHP. The JVM is created using JNI,
     and everything runs in-process.
    </p>
    <div class="warning"><b class="warning">Warning</b><p class="simpara">This extension is
<em class="emphasis">EXPERIMENTAL</em>. The behaviour of this extension --
including the names of its functions and anything else documented
about this extension -- may change without notice in a future release of PHP. 
Use this extension at your own risk.</p></div>
   </div>
   
   <div id="java.requirements" class="section">
    <h2 class="title">Requirements</h2>
    <p class="para">
     You need a Java VM installed on your machine to use this extension.
    </p>
   </div>
   
   

<div id="java.installation" class="section">
 <h2 class="title">Installation</h2>
 <p class="para">
  This <a href="http://pecl.php.net/" class="link external">&raquo; PECL</a> extension
is not bundled with PHP.
  
 </p>
 <p class="para">
  In PHP 4 this <acronym title="PHP Extension and Application Repository">PECL</acronym> extensions
source can be found in the <var class="filename">ext/</var> directory within the
PHP source or at the <acronym title="PHP Extension and Application Repository">PECL</acronym> link above.
  In order to use these functions you must compile PHP with Java support by 
  using the <span class="option">--with-java[=DIR]</span> where DIR 
  points to the base install directory of your JDK.  This extension can only
  be built as a shared extension.  Additional build extensions can be found
  in <var class="filename">php-src/ext/java/README</var>.
 </p>
 <p class="para">
  Windows users will enable <var class="filename">php_java.dll</var> inside
  of <var class="filename">php.ini</var> in order to use these functions.
  In PHP 4 this <acronym title="Dynamic Link Library">DLL</acronym> resides in
the <var class="filename">extensions/</var> directory within the PHP Windows
binaries download.
  
The <acronym title="Dynamic Link Library">DLL</acronym> for this <acronym title="PHP Extension and Application Repository">PECL</acronym> extension
may be downloaded from either the 
<a href="http://www.php.net/downloads.php" class="link external">&raquo; PHP Downloads</a> page or from 
<a href="http://pecl4win.php.net/" class="link external">&raquo; http://pecl4win.php.net/</a>
 </p>
 <blockquote><p><b class="note">Note</b>: 
  
   In order to enable this module on a Windows environment with PHP &lt;= 
   4.0.6, you must make <var class="filename">jvm.dll</var> available to your 
   systems PATH.  No additional DLL is needed for PHP versions &gt; 4.0.6.
  <br />
 </p></blockquote>
</div>




   

<div id="java.configuration" class="section">
 <h2 class="title">Runtime Configuration</h2>
 <p class="simpara">
The behaviour of these functions is affected by settings in <var class="filename">php.ini</var>.
</p>
 <p class="para">
 <table border="5">
  <caption><b>Java configuration options</b></caption>
  <colgroup>

   <thead valign="middle">
    <tr valign="middle">
     <th colspan="1">Name</th>
     <th colspan="1">Default</th>
     <th colspan="1">Changeable</th>
     <th colspan="1">Changelog</th>
    </tr>

   </thead>

   <tbody valign="middle">
    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left">java.class.path</td>
     <td colspan="1" rowspan="1" align="left">NULL</td>
     <td colspan="1" rowspan="1" align="left">PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left">java.home</td>
     <td colspan="1" rowspan="1" align="left">NULL</td>
     <td colspan="1" rowspan="1" align="left">PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left">java.library.path</td>
     <td colspan="1" rowspan="1" align="left">NULL</td>
     <td colspan="1" rowspan="1" align="left">PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

    <tr valign="middle">
     <td colspan="1" rowspan="1" align="left">java.library</td>
     <td colspan="1" rowspan="1" align="left">JAVALIB</td>
     <td colspan="1" rowspan="1" align="left">PHP_INI_ALL</td>
     <td class="empty">&nbsp;</td>
    </tr>

   </tbody>
  </colgroup>

 </table>

 For further details and definitions of the 
PHP_INI_* constants, see the <a href="ini.html" class="xref">php.ini directives</a>.
 </p>
</div>





   <div id="java.resources" class="section">
    <h2 class="title">Resource Types</h2>
    <p class="para">This extension has no resource types defined.</p>
   </div>

   <div id="java.constants" class="section">
    <h2 class="title">Predefined Constants</h2>
    <p class="para">This extension has no constants defined.</p>
   </div>

   <div id="java.examples" class="section">
    <h2 class="title">Examples</h2>
    <p class="para">
     <div class="example">
      <p><b>Example#1 Java Example</b></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;get&nbsp;instance&nbsp;of&nbsp;Java&nbsp;class&nbsp;java.lang.System&nbsp;in&nbsp;PHP<br /></span><span style="color: #0000BB">$system&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.lang.System'</span><span style="color: #007700">);<br /><br /></span><span style="color: #FF8000">//&nbsp;demonstrate&nbsp;property&nbsp;access<br /></span><span style="color: #007700">echo&nbsp;</span><span style="color: #DD0000">'Java&nbsp;version='&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.version'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">'Java&nbsp;vendor='&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.vendor'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br />echo&nbsp;</span><span style="color: #DD0000">'OS='&nbsp;</span><span style="color: #007700">.&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'os.name'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;'&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'os.version'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;on&nbsp;'&nbsp;</span><span style="color: #007700">.<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000BB">$system</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">getProperty</span><span style="color: #007700">(</span><span style="color: #DD0000">'os.arch'</span><span style="color: #007700">)&nbsp;.&nbsp;</span><span style="color: #DD0000">'&nbsp;&lt;br&nbsp;/&gt;'</span><span style="color: #007700">;<br /><br /></span><span style="color: #FF8000">//&nbsp;java.util.Date&nbsp;example<br /></span><span style="color: #0000BB">$formatter&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.text.SimpleDateFormat'</span><span style="color: #007700">,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #DD0000">"EEEE,&nbsp;MMMM&nbsp;dd,&nbsp;yyyy&nbsp;'at'&nbsp;h:mm:ss&nbsp;a&nbsp;zzzz"</span><span style="color: #007700">);<br /><br />echo&nbsp;</span><span style="color: #0000BB">$formatter</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">format</span><span style="color: #007700">(new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.util.Date'</span><span style="color: #007700">));<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>
     <div class="example">
      <p><b>Example#2 AWT Example</b></p>
      <div class="example-contents">
<div class="phpcode"><code><span style="color: #000000">
<span style="color: #0000BB">&lt;?php<br /></span><span style="color: #FF8000">//&nbsp;This&nbsp;example&nbsp;is&nbsp;only&nbsp;intended&nbsp;to&nbsp;be&nbsp;run&nbsp;as&nbsp;a&nbsp;CGI.<br /><br /></span><span style="color: #0000BB">$frame&nbsp;&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.awt.Frame'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'PHP'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$button&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.awt.Button'</span><span style="color: #007700">,&nbsp;</span><span style="color: #DD0000">'Hello&nbsp;Java&nbsp;World!'</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">add</span><span style="color: #007700">(</span><span style="color: #DD0000">'North'</span><span style="color: #007700">,&nbsp;</span><span style="color: #0000BB">$button</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">validate</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">pack</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">visible&nbsp;</span><span style="color: #007700">=&nbsp;</span><span style="color: #0000BB">True</span><span style="color: #007700">;<br /><br /></span><span style="color: #0000BB">$thread&nbsp;</span><span style="color: #007700">=&nbsp;new&nbsp;</span><span style="color: #0000BB">Java</span><span style="color: #007700">(</span><span style="color: #DD0000">'java.lang.Thread'</span><span style="color: #007700">);<br /></span><span style="color: #0000BB">$thread</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">sleep</span><span style="color: #007700">(</span><span style="color: #0000BB">10000</span><span style="color: #007700">);<br /><br /></span><span style="color: #0000BB">$frame</span><span style="color: #007700">-&gt;</span><span style="color: #0000BB">dispose</span><span style="color: #007700">();<br /></span><span style="color: #0000BB">?&gt;</span>
</span>
</code></div>
      </div>

     </div>

     Notes:

     <ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        <i class="literal">new Java()</i> will create an instance of a class if 
        a suitable constructor is available. If no parameters are passed and 
        the default constructor is useful as it provides access to classes 
        like <i class="literal">java.lang.System</i> which expose most of their 
        functionallity through static methods.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Accessing a member of an instance will first look for bean properties
        then public fields. In other words, <i class="literal">print $date.time</i>
        will first attempt to be resolved as <i class="literal">$date.getTime()</i>,
        then as <i class="literal">$date.time</i>.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        Both static and instance members can be accessed on an object with
        the same syntax. Furthermore, if the java object is of type
        <i class="literal">java.lang.Class</i>, then static members of the class 
        (fields and methods) can be accessed.
       </span>
      </li>
      <li class="listitem">
       <p class="para">
        Exceptions raised result in PHP warnings, and <b><tt>NULL</tt></b> results. The
        warnings may be eliminated by prefixing the method call with an
        &quot;@&quot; sign. The following APIs may be used to retrieve and reset
        the last error:
        <ul class="itemizedlist">
         <li class="listitem"><span class="simpara"><a href="function.java-last-exception-get.html" class="function">java_last_exception_get()</a></span></li>
         <li class="listitem"><span class="simpara"><a href="function.java-last-exception-clear.html" class="function">java_last_exception_clear()</a></span></li>
        </ul>
       </p>
      </li>
      <li class="listitem">
       <span class="simpara">
        Overload resolution is in general a hard problem given the
        differences in types between the two languages. The PHP Java
        extension employs a simple, but fairly effective, metric for
        determining which overload is the best match.
       </span>
       <span class="simpara">
        Additionally, method names in PHP are not case sensitive, potentially
        increasing the number of overloads to select from.
       </span>
       <span class="simpara">
        Once a method is selected, the parameters are coerced if necessary, 
        possibly with a loss of data (example: double precision floating point
        numbers will be converted to boolean).
        
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        In the tradition of PHP, arrays and hashtables may pretty much
        be used interchangably. Note that hashtables in PHP may only be
        indexed by integers or strings; and that arrays of primitive types
        in Java can not be sparse. Also note that these constructs are
        passed by value, so may be expensive in terms of memory and time.
       </span>
      </li>
     </ul>
    </p>
   </div>
   
   <div id="java.servlet" class="section">
    <h2 class="title">Java Servlet SAPI</h2>
    <p class="para">
     The Java Servlet SAPI builds upon the mechanism defined by the Java
     extension to enable the entire PHP processor to be run as a servlet.
     The primary advantage of this from a PHP perspective is that web servers
     which support servlets typically take great care in pooling and reusing
     JVMs. Build instructions for the Servlet SAPI module can be found in 
     <var class="filename">php4/sapi/README</var>.

     Notes:

     <ul class="itemizedlist">
      <li class="listitem">
       <span class="simpara">
        While this code is intended to be able to run on any servlet engine,
        it has only been tested on Apache&#039;s Jakarta/tomcat to date. Bug
        reports, success stories and/or patches required to get this code
        to run on other engines would be appreciated.
       </span>
      </li>
      <li class="listitem">
       <span class="simpara">
        PHP has a habit of changing the working directory. sapi/servlet will
        eventually change it back, but while PHP is running the servlet engine
        may not be able to load any classes from the CLASSPATH which are
        specified using a relative directory syntax, or find the work directory
        used for administration and JSP compilation tasks.
       </span>
      </li>
     </ul>
    </p>
   </div>
  </div>















 <h2>Table of Contents</h2><ul class="chunklist chunklist_reference"><li><a href="function.java-last-exception-clear.html">java_last_exception_clear</a> — Clear last Java exception</li><li><a href="function.java-last-exception-get.html">java_last_exception_get</a> — Get last Java exception</li></ul>
</div>
<hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="function.ircg-whois.html">ircg_whois</a></div>
 <div class="next" style="float: right;"><a href="function.java-last-exception-clear.html">java_last_exception_clear</a></div>
 <div class="up"><a href="funcref.html">Function Reference</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
