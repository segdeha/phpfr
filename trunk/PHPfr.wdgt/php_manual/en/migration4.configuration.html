<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
  <title>Migrating Configuration Files</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
 </head>
 <body><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="migration4.php4.with.php3.html">Running PHP 3 and PHP 4 concurrently</a></div>
 <div class="next" style="float: right;"><a href="migration4.parser.html">Parser behavior</a></div>
 <div class="up"><a href="migration4.html">Migrating from PHP 3 to PHP 4</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div><hr /><div id="migration4.configuration" class="section">
   <h2 class="title">Migrating Configuration Files</h2>
   <p class="para">
    The global configuration file, <var class="filename">php3.ini</var>,
    has changed its name to <var class="filename">php.ini</var>.
   </p>
   <p class="para">
    For the Apache configuration file, there are slightly more
    changes. The MIME types recognized by the PHP module have
    changed.
    <div class="informalexample">
     <div class="example-contents">
<div class="cdata"><pre>
application/x-httpd-php3        --&gt;    application/x-httpd-php
application/x-httpd-php3-source --&gt;    application/x-httpd-php-source
</pre></div>
     </div>

    </div>
   </p>
   <p class="para">
    You can make your configuration files work with both versions
    of PHP (depending on which one is currently compiled into the
    server), using the following syntax:
    <div class="informalexample">
     <div class="example-contents">
<div class="cdata"><pre>
AddType  application/x-httpd-php3        .php3
AddType  application/x-httpd-php3-source .php3s

AddType  application/x-httpd-php         .php
AddType  application/x-httpd-php-source  .phps
</pre></div>
     </div>

    </div>
   </p>
   <p class="simpara">
    In addition,  the PHP directive names for Apache have changed.
   </p>
   <p class="para">
    Starting with PHP 4.0, there are only four Apache directives
    that relate to PHP:
    <div class="informalexample">
     <div class="example-contents">
<div class="cdata"><pre>
php_value [PHP directive name] [value]
php_flag [PHP directive name] [On|Off]
php_admin_value [PHP directive name] [value]
php_admin_flag [PHP directive name] [On|Off]
</pre></div>
     </div>

    </div>
   </p>
   <p class="simpara">
    There are two differences between the Admin values and the non admin values:
   </p>
   <ul class="itemizedlist">
    <li class="listitem">
     <span class="simpara">
      Admin values (or flags) can only appear in the server-wide Apache configuration
      files (e.g., <var class="filename">httpd.conf</var>).
     </span>
    </li>
    <li class="listitem">
     <span class="simpara">
      Standard values (or flags) cannot control certain PHP directives, for example: 
      <a href="features.safe-mode.html#ini.safe-mode" class="link">safe mode</a> (if you could override safe mode settings in 
      <var class="filename">.htaccess</var> files, it 
      would defeat <a href="features.safe-mode.html#ini.safe-mode" class="link">safe mode</a>&#039;s purpose).  In contrast, Admin values can modify 
      the value of any PHP directive.
     </span>
    </li>
   </ul>
   <p class="simpara">
    To make the transition process easier, PHP 4 is bundled with scripts 
    that automatically convert your Apache configuration and 
    <var class="filename">.htaccess</var> files 
    to work with both PHP 3 and PHP 4. These scripts do NOT convert the mime 
    type lines! You have to convert these yourself.
   </p>
   <p class="para">
    To convert your Apache configuration files, run the <var class="filename">apconf-conv.sh</var>
    script (available in the <var class="filename">scripts/apache/</var> directory).  For example:
    <div class="informalexample">
     <div class="example-contents">
<div class="cdata"><pre>
~/php4/scripts/apache:#  ./apconf-conv.sh /usr/local/apache/conf/httpd.conf
</pre></div>
     </div>

    </div>
   </p>
   <p class="simpara">
    Your original configuration file will be saved in httpd.conf.orig.
   </p>
   <p class="para">
    To convert your <var class="filename">.htaccess</var> files, run the 
    <var class="filename">aphtaccess-conv.sh</var> script (available in 
    the <var class="filename">scripts/apache/</var> directory as well):
    <div class="informalexample">
     <div class="example-contents">
<div class="cdata"><pre>
~/php4/scripts/apache:#  find / -name .htaccess -exec ./aphtaccess-conv.sh {} \;
</pre></div>
     </div>

    </div>
   </p>
   <p class="simpara">
    Likewise, your old <var class="filename">.htaccess</var> files will be saved with 
    an .orig suffix.
   </p>
   <p class="simpara">
    The conversion scripts require &#039;awk&#039; to be installed.
   </p>
  </div><hr /><div style="text-align: center;">
 <div class="prev" style="float: left;"><a href="migration4.php4.with.php3.html">Running PHP 3 and PHP 4 concurrently</a></div>
 <div class="next" style="float: right;"><a href="migration4.parser.html">Parser behavior</a></div>
 <div class="up"><a href="migration4.html">Migrating from PHP 3 to PHP 4</a></div>
 <div class="home"><a href="index.html">PHP Manual</a></div>
</div></body></html>
